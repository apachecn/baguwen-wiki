<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# Redis事务机制了解过吗？

> 原文：[https://zwmst.com/798.html](https://zwmst.com/798.html)

   [ *Redis* ](https://zwmst.com/redis)*[ <time datetime="2021-08-14T08:11:23+08:00"> 2021-08-14 </time> ](https://zwmst.com/798.html)  Redis事务的概念：

Redis 事务的本质是一组命令的集合。事务支持一次执行多个命令，一个事务中所有命令都会 被序列化。在事务执行过程，会按照顺序串行化执行队列中的命令，其他客户端提交的命令请 求不会插入到事务执行命令序列中。

Redis事务就是一次性、顺序性、排他性的执行一个队列中的一系列命令。

Redis事务没有隔离级别的概念：

批量操作在发送 EXEC 命令前被放入队列缓存，并不会被实际执行，也就不存在事务内的查询 要看到事务里的更新，事务外查询不能看到。

Redis不保证原子性：

Redis中，单条命令是原子性执行的，但事务不保证原子性，且没有回滚。事务中任意命令执 行失败，其余的命令仍会被执行。

Redis事务的三个阶段：

开始事务

命令入队

执行事务

Redis事务相关命令：

watch key1 key2 … : 监视一或多个key,如果在事务执行之前，被监视的key被其他命令改动， 则事务被打断 （ 类似乐观锁 ）

multi : 标记一个事务块的开始（ queued ）

exec : 执行所有事务块的命令 （ 一旦执行exec后，之前加的监控锁都会被取消掉 ）

discard : 取消事务，放弃事务块中的所有命令

unwatch : 取消watch对所有key的监控*