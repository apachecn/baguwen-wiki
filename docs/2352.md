<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 951.Java 类加载过程？

> 原文：[https://zwmst.com/5184.html](https://zwmst.com/5184.html)

   [ *Java基础* ](https://zwmst.com/java%e5%9f%ba%e7%a1%80)*[ <time datetime="2021-10-19T22:07:06+08:00"> 2021-10-19 </time> ](https://zwmst.com/5184.html)  Java 类加载需要经历一下 7 个过程：

1.  加载
    加载是类加载的第一个过程，在这个阶段，将完成一下三件事情：
    1.  通过一个类的全限定名获取该类的二进制流。
    2.  将该二进制流中的静态存储结构转化为方法去运行时数据结构。
    3.  在内存中生成该类的 Class 对象，作为该类的数据访问入口。
2.  验证
    验证的目的是为了确保 Class 文件的字节流中的信息不回危害到虚拟机.在该阶段主要完成以下四钟验证:
    1.  文件格式验证：验证字节流是否符合 Class 文件的规范，如主次版本号是否在当前虚拟机范围内，常量池中的常量是否有不被支持的类型.
    2.  元数据验证:对字节码描述的信息进行语义分析，如这个类是否有父类，是否集成了不被继承的类等。
    3.  字节码验证：是整个验证过程中最复杂的一个阶段，通过验证数据流和控制流的分析，确定程序语义是否正确，主要针对方法体的验证。如：方法中的类型转换是否正确，跳转指令是否正确等。
    4.  符号引用验证：这个动作在后面的解析过程中发生，主要是为了确保解析动作能正确执行。
3.  准备
    准备阶段是为类的静态变量分配内存并将其初始化为默认值，这些内存都将在方法区中进行分配。准备阶段不分配类中的实例变量的内存，实例变量将会在对象实例化时随着对象一起分配在 Java 堆中。
    public static int value=123;//在准备阶段 value 初始值为 0 。在初始化阶段才会变为 123 。
4.  解析
    该阶段主要完成符号引用到直接引用的转换动作。解析动作并不一定在初始化动作完成之前，也有可能在初始化之后。
5.  初始化
    初始化时类加载的最后一步，前面的类加载过程，除了在加载阶段用户应用程序可以通过自定义类加载器参与之外，其余动作完全由虚拟机主导和控制。到了初始化阶段，才真正开始执行类中定义的Java 程序代码。
6.  使用
7.  卸载*